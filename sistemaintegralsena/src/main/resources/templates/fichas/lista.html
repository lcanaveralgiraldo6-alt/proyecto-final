<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Gestión de Fichas</title>
    <link rel="stylesheet" th:href="@{/css/estilos.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
</head>
<body>
    <div th:replace="~{dashboard :: sidebar}"></div>
    <div class="main-content">
        <header th:replace="~{dashboard :: header-top}"></header>

        <div class="dashboard-area">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2>Gestión de Fichas</h2>
                <a sec:authorize="hasRole('ADMIN')" th:href="@{/fichas/crear}" class="btn-create" style="background:#1abc9c; color:white; padding:10px 20px; text-decoration:none; border-radius:5px; font-weight:bold;">+ Nueva Ficha</a>
            </div>

            <div th:if="${exito}" class="alert-success-global"><span th:text="${exito}"></span></div>
            <div th:if="${error}" class="alert-error-global"><span th:text="${error}"></span></div>

            <div style="background:white; padding:20px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
                <table style="width:100%; border-collapse:collapse;">
                    <thead style="background:#0077c9; color:white;">
                        <tr>
                            <th style="padding:12px; text-align:center;">ID</th>
                            <th style="padding:12px;">Código</th>
                            <th style="padding:12px;">Programa</th>
                            <th style="padding:12px;">Jornada</th>
                            <th style="padding:12px;">Coordinación</th>
                            <th sec:authorize="hasRole('ADMIN')" style="padding:12px;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="f : ${fichas}" style="border-bottom:1px solid #eee;">
                            
                            <td style="padding:12px; text-align:center; font-weight:bold;" th:text="${f.id}"></td>
                            
                            <td style="padding:12px;" th:text="${f.codigo}"></td>
                            
                            <td style="padding:12px;" th:text="${f.programa}"></td>
                            <td style="padding:12px;" th:text="${f.jornada}"></td>
                            <td style="padding:12px;" th:text="${f.coordinacion}"></td>
                            <td sec:authorize="hasRole('ADMIN')" style="padding:12px;">
                                <a th:href="@{/fichas/editar/{id}(id=${f.id})}" style="color:#f39c12; font-weight:bold; margin-right:10px; text-decoration:none;">Editar</a>
                                <a th:href="@{/fichas/eliminar/{id}(id=${f.id})}" onclick="return confirm('¿Eliminar ficha?')" style="color:#e74c3c; font-weight:bold; text-decoration:none;">Eliminar</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>